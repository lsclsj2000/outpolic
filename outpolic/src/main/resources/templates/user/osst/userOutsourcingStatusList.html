<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{user/layout/userLayoutMain}">
<head>
    <meta name="description" content="한국스마트정보교육원 팀프로젝트 - 외주 목록" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>내 외주 진행 목록</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Inter 폰트 정의 */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

        /* Tailwind Preflight (최소한의 리셋) - Tailwind의 기본 리셋을 에뮬레이트하기 위한 기본 재설정 */
        *, ::before, ::after {
            box-sizing: border-box;
            border-width: 0;
            border-style: solid;
            border-color: #e5e7eb; /* gray-200 */
        }
        html {
            line-height: 1.5;
            -webkit-text-size-adjust: 100%;
            /* Tailwind 기본 폰트 스택 */
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
        }
        body {
            margin: 0;
            line-height: inherit;
            font-family: 'Inter', sans-serif; /* Inter 폰트 적용 */
        }
        /* 이미지 및 비디오 기본 스타일 */
        img, video {
            max-width: 100%;
            height: auto;
        }
        /* 버튼 기본 스타일 */
        button {
            background-color: transparent;
            background-image: none;
        }
        /* 링크 기본 스타일 */
        a {
            color: inherit;
            text-decoration: inherit;
        }
        /* 입력 필드 기본 스타일 */
        input, textarea, select {
            padding: 0;
            line-height: inherit;
            color: inherit;
            background-color: transparent;
            background-image: none;
        }
        textarea {
            resize: vertical;
        }
        input[type="text"], input[type="file"], select, textarea {
            border: 1px solid #d1d5db; /* gray-300 */
            border-radius: 0.375rem; /* rounded-md */
            padding: 0.75rem; /* p-3 */
            width: 100%; /* w-full */
            margin-bottom: 1rem; /* mb-4 */
        }
        input[type="file"] {
            padding: 0.5rem; /* Adjust padding for file input */
        }
        select {
            appearance: none; /* Remove default arrow */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='currentColor'%3E%3Cpath fill-rule='evenodd' d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z' clip-rule='evenodd'%3E%3C/path%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
        }

        /* 기본 SR_ 클래스 */
        .SR_header-bg {
            background-color: #3b82f6; /* Blue header */
        }
        .SR_footer-bg {
            background-color: #3b82f6; /* Blue footer */
        }
        .SR_container-bg {
            background-color: #ffffff; /* White content area */
        }
        .SR_btn-primary {
            background-color: #3b82f6;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            transition: background-color 0.2s;
        }
        .SR_btn-primary:hover {
            background-color: #2563eb;
        }
        .SR_btn-secondary {
            background-color: #e0e7ff;
            color: #3b82f6;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            transition: background-color 0.2s;
        }
        .SR_btn-secondary:hover {
            background-color: #c7d2fe;
        }
        .SR_box-shadow {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        /* Flexbox 및 레이아웃 관련 SR_ 클래스 */
        .SR_flex { display: flex; }
        .SR_flex-col { flex-direction: column; }
        .SR_min-h-screen { min-height: 100vh; }
        .SR_flex-grow { flex-grow: 1; }
        .SR_gap-8 { gap: 2rem; /* 32px */ }
        .SR_items-center { align-items: center; }
        .SR_justify-center { justify-content: center; }
        .SR_justify-end { justify-content: flex-end; }
        .SR_lg\:flex-row { /* lg:flex-row */
            flex-direction: row;
        }
        .SR_w-full { width: 100%; }
        .SR_lg\:w-1\/3 { /* lg:w-1/3 */
            width: 33.333333%;
        }
        .SR_lg\:w-2\/3 { /* lg:w-2/3 */
            width: 66.666667%;
        }

        /* 간격 (Padding/Margin) 관련 SR_ 클래스 */
        .SR_p-8 { padding: 2rem; /* 32px */ }
        .SR_p-6 { padding: 1.5rem; /* 24px */ }
        .SR_p-3 { padding: 0.75rem; /* 12px */ }
        .SR_mb-8 { margin-bottom: 2rem; /* 32px */ }
        .SR_mb-4 { margin-bottom: 1rem; /* 16px */ }
        .SR_mb-2 { margin-bottom: 0.5rem; /* 8px */ }
        .SR_mx-auto { margin-left: auto; margin-right: auto; }
        .SR_mt-2 { margin-top: 0.5rem; /* 8px */ }

        /* 텍스트 관련 SR_ 클래스 */
        .SR_text-3xl { font-size: 1.875rem; /* 30px */; line-height: 2.25rem; /* 36px */ }
        .SR_text-xl { font-size: 1.25rem; /* 20px */; line-height: 1.75rem; /* 28px */ }
        .SR_font-bold { font-weight: 700; }
        .SR_font-semibold { font-weight: 600; }
        .SR_text-center { text-align: center; }
        .SR_text-sm { font-size: 0.875rem; /* 14px */ }
        .SR_text-base { font-size: 1rem; /* 16px */ }
        .SR_underline { text-decoration-line: underline; }

        /* 색상 관련 SR_ 클래스 */
        .SR_text-gray-800 { color: #1f2937; }
        .SR_text-gray-700 { color: #374151; }
        .SR_text-gray-600 { color: #4b5563; }
        .SR_text-blue-700 { color: #1d4ed8; }
        .SR_text-blue-500 { color: #3b82f6; }
        .SR_bg-white { background-color: #ffffff; }
        .SR_bg-gray-50 { background-color: #f9fafb; }
        .SR_border-gray-200 { border-color: #e5e7eb; }

        /* 크기 및 모양 관련 SR_ 클래스 */
        .SR_rounded-lg { border-radius: 0.5rem; /* 8px */ }
        .SR_rounded-md { border-radius: 0.375rem; /* 6px */ }
        .SR_border { border-width: 1px; border-style: solid; }

        /* Styles for the blue bar on the label */
        .SR_label-container {
            display: flex;
            align-items: center;
            justify-content: flex-start; /* Left align */
            max-width: 6xl; /* max-w-6xl */
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 2rem; /* mb-8 */
        }

        .SR_blue-bar {
            width: 8px; /* Width of the blue bar */
            height: 30px; /* Height of the blue bar, matching text height */
            background-color: #3b82f6; /* Blue color */
            border-radius: 4px; /* Slightly rounded corners for the bar */
            margin-right: 1rem; /* Space between bar and text */
        }

        /* Project List Specific Styles */
        /* Removed grid display to allow vertical stacking */
        .SR_project-list-container {
            display: flex;
            flex-direction: column;
            gap: 1.5rem; /* gap-6 */
        }

        .SR_project-card {
            background-color: #ffffff;
            padding: 1.5rem; /* p-6 */
            border-radius: 0.5rem; /* rounded-lg */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* SR_box-shadow */
            border: 1px solid #e5e7eb; /* border border-gray-200 */
            cursor: pointer;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            width: 100%; /* Ensure full width */
            display: flex; /* Use flex for internal alignment if needed */
            flex-direction: column; /* Stack content vertically within the card */
        }

        .SR_project-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.15);
        }

        .SR_project-title {
            font-size: 1.125rem; /* text-lg */
            font-weight: 600; /* font-semibold */
            color: #1f2937; /* text-gray-800 */
            margin-bottom: 0.5rem; /* mb-2 */
        }

        .SR_project-meta {
            font-size: 0.875rem; /* text-sm */
            color: #6b7280; /* text-gray-500 */
            margin-bottom: 0.5rem; /* mb-2 */
        }

        .SR_project-progress-bar {
            width: 100%;
            height: 10px;
            background-color: #e0e7ff; /* light blue background */
            border-radius: 9999px; /* rounded-full */
            overflow: hidden;
            margin-top: 0.75rem; /* mt-3 */
            margin-bottom: 0.5rem; /* mb-2 */
        }

        .SR_project-progress-fill {
            height: 100%;
            background-color: #3b82f6; /* Blue fill */
            border-radius: 9999px; /* rounded-full */
            transition: width 0.5s ease-in-out;
        }

        .SR_project-status {
            font-size: 0.875rem; /* text-sm */
            font-weight: 500; /* font-medium */
            color: #1d4ed8; /* text-blue-700 */
            text-align: right;
            margin-top: 0.5rem;
        }
        .SR_project-status.completed {
            color: #10b981; /* green-600 */
        }
        .SR_project-status.in-progress {
            color: #f59e0b; /* yellow-600 */
        }
        .SR_project-status.upcoming {
            color: #6b7280; /* gray-500 */
        }
    </style>
</head>

<body>
	<div layout:fragment="contents">
	    <div class="SR_flex SR_flex-col SR_min-h-screen">
	        <!-- Main Content -->
	        <main class="SR_flex-grow SR_p-8">
	            <!-- Page Title with Blue Bar -->
	            <div class="SR_label-container">
	                <div class="SR_blue-bar"></div>
	                <h2 class="SR_text-3xl SR_font-bold SR_text-gray-800">내 외주 진행 목록</h2>
	            </div>
	
	            <!-- Project List Container -->
	            <div class="SR_max-w-6xl SR_mx-auto SR_container-bg SR_p-8 SR_rounded-lg SR_box-shadow">
	                <div id="project-list" class="SR_project-list-container">
	                    <!-- Project cards will be dynamically loaded here -->
	                </div>
	                <p id="no-projects-message" class="SR_text-center SR_text-gray-600 SR_mt-8 SR_hidden">
	                    진행 중인 외주 프로젝트가 없습니다.
	                </p>
	            </div>
	        </main>
	    </div>
	</div>
	<th:block layout:fragment="jsScript">
	    <script>
	        // Sample data for outsourcing projects
	        const outsourcingProjectsData = [
	            {
	                id: 'proj-001',
	                title: '원룸 인테리어 디자인 외주 프로젝트',
	                partner: '홍길동 (수요자)',
	                progress: 75,
	                currentStep: '작업 진행',
	                status: 'in-progress',
	                lastActivityDate: '2025-07-07'
	            },
	            {
	                id: 'proj-002',
	                title: '웹사이트 개발 프로젝트',
	                partner: '김철수 (공급자)',
	                progress: 20,
	                currentStep: '계약 체결',
	                status: 'upcoming',
	                lastActivityDate: '2025-07-01'
	            },
	            {
	                id: 'proj-003',
	                title: '모바일 앱 UI/UX 개선',
	                partner: '이영희 (수요자)',
	                progress: 100,
	                currentStep: '최종 완료',
	                status: 'completed',
	                lastActivityDate: '2025-06-28'
	            },
	            {
	                id: 'proj-004',
	                title: '로고 디자인 의뢰',
	                partner: '박민준 (수요자)',
	                progress: 50,
	                currentStep: '초기 기획',
	                status: 'in-progress',
	                lastActivityDate: '2025-07-05'
	            },
	            {
	                id: 'proj-005',
	                title: '데이터 분석 리포트 작성',
	                partner: '최지우 (공급자)',
	                progress: 0,
	                currentStep: '예정',
	                status: 'upcoming',
	                lastActivityDate: '2025-07-02'
	            }
	        ];
	
	        document.addEventListener('DOMContentLoaded', () => {
	            renderProjectList();
	        });
	
	        function renderProjectList() {
	            const projectListContainer = document.getElementById('project-list');
	            const noProjectsMessage = document.getElementById('no-projects-message');
	            projectListContainer.innerHTML = ''; // Clear existing content
	
	            if (outsourcingProjectsData.length === 0) {
	                noProjectsMessage.classList.remove('SR_hidden');
	                return;
	            } else {
	                noProjectsMessage.classList.add('SR_hidden');
	            }
	
	            outsourcingProjectsData.forEach(project => {
	                const projectCard = document.createElement('div');
	                projectCard.className = 'SR_project-card';
	                projectCard.onclick = () => viewProjectDetails(project.id); // Simulate navigation
	
	                let statusClass = '';
	                if (project.status === 'completed') {
	                    statusClass = 'completed';
	                } else if (project.status === 'in-progress') {
	                    statusClass = 'in-progress';
	                } else if (project.status === 'upcoming') {
	                    statusClass = 'upcoming';
	                }
	
	                projectCard.innerHTML = `
	                    <h3 class="SR_project-title">${project.title}</h3>
	                    <p class="SR_project-meta">담당자: ${project.partner}</p>
	                    <p class="SR_project-meta">현재 단계: ${project.currentStep}</p>
	                    <div class="SR_project-progress-bar">
	                        <div class="SR_project-progress-fill" style="width: ${project.progress}%;"></div>
	                    </div>
	                    <p class="SR_project-meta">진행률: ${project.progress}%</p>
	                    <p class="SR_project-meta">마지막 활동: ${project.lastActivityDate}</p>
	                    <p class="SR_project-status ${statusClass}">${project.status === 'completed' ? '완료' : project.status === 'in-progress' ? '진행 중' : '예정'}</p>
	                `;
	                projectListContainer.appendChild(projectCard);
	            });
	        }
	
	        function viewProjectDetails(projectId) {
	            // In a real application, this would navigate to a detailed page
	            // e.g., window.location.href = `/outsourcing/progress/${projectId}`;
	            showMessageBox(`프로젝트 상세 보기: ${projectId} (실제 페이지로 이동)`);
	            console.log(`Viewing details for project: ${projectId}`);
	        }
	
	        // Custom Message Box functions (replaces alert()) - Copied from previous immersive
	        function showMessageBox(message) {
	            let messageBox = document.getElementById('SR_messageBox');
	            if (!messageBox) {
	                messageBox = document.createElement('div');
	                messageBox.id = 'SR_messageBox';
	                messageBox.className = 'SR_fixed SR_inset-0 SR_bg-gray-600 SR_bg-opacity-50 SR_flex SR_items-center SR_justify-center SR_z-50';
	                messageBox.innerHTML = `
	                    <div class="SR_bg-white SR_p-6 SR_rounded-lg SR_shadow-lg SR_max-w-sm SR_w-full SR_text-center">
	                        <p class="SR_mb-4">${message}</p>
	                        <button class="SR_btn-primary" onclick="closeMessageBox()">확인</button>
	                    </div>
	                `;
	                document.body.appendChild(messageBox);
	            } else {
	                messageBox.querySelector('p').textContent = message;
	                messageBox.classList.remove('SR_hidden');
	            }
	        }
	
	        function closeMessageBox() {
	            const messageBox = document.getElementById('SR_messageBox');
	            if (messageBox) {
	                messageBox.classList.add('SR_hidden');
	            }
	        }
	    </script>
	</th:block>
</body>
</html>
